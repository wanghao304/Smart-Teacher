<!--chat.wxml-->
<view class="chat-page">
  <!-- 消息列表 -->
  <scroll-view 
    scroll-y 
    class="message-list" 
    id="message-list"
    scroll-into-view="{{scrollToView}}"
  >
    <view class="message-item {{item.role}}" wx:for="{{messages}}" wx:key="index">
      <view class="message-avatar">
        <text>{{item.role === 'user' ? '我' : 'AI'}}</text>
      </view>
      <view class="message-content">
        <text class="message-text">{{item.content}}</text>
        <text class="message-time">{{item.time}}</text>
      </view>
    </view>

    <!-- 加载中 -->
    <view wx:if="{{isLoading}}" class="loading-tip">
      <text>AI正在思考中...</text>
    </view>
  </scroll-view>

  <!-- 输入框 -->
  <view class="input-bar">
    <input 
      class="message-input" 
      placeholder="输入你的问题..." 
      value="{{inputText}}"
      bindinput="onInput"
      confirm-type="send"
      bindconfirm="sendMessage"
    />
    <button class="send-btn" bindtap="sendMessage">发送</button>
  </view>
</view>
