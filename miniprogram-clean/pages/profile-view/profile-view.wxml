<!-- pages/profile-view/profile-view.wxml -->
<view class="container">
  <!-- é¡¶éƒ¨æ ‡é¢˜ -->
  <view class="header">
    <view class="title">æˆ‘çš„èµ„æ–™</view>
    <view class="subtitle">ç‚¹å‡»ä»»æ„é¡¹ç›®å¯ç¼–è¾‘</view>
  </view>

  <!-- ç©ºçŠ¶æ€æç¤º -->
  <view class="empty-state" wx:if="{{!profile || !profile.currentIndustry}}">
    <view class="empty-icon">ğŸ“‹</view>
    <view class="empty-title">æš‚æ— æ¡£æ¡ˆ</view>
    <view class="empty-desc">è¯·å…ˆå®Œå–„ä¸ªäººæ¡£æ¡ˆ</view>
    <button class="btn-goto-profile" bindtap="reCollect">å»å¡«å†™æ¡£æ¡ˆ</button>
  </view>

  <!-- èµ„æ–™å¡ç‰‡åŒºåŸŸ -->
  <scroll-view class="content" scroll-y wx:else>
    
    <!-- ç¬¬1ç»´åº¦ï¼šèº«ä»½é”šç‚¹ -->
    <view class="section">
      <view class="section-title">èº«ä»½é”šç‚¹</view>
      
      <view class="field-item" bindtap="startEdit" data-field="currentIndustry">
        <view class="field-label">å½“å‰è¡Œä¸š</view>
        <view class="field-value">{{profile.currentIndustry || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="currentRole">
        <view class="field-label">å½“å‰èŒä½</view>
        <view class="field-value">{{profile.currentRole || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item">
        <view class="field-label">ä»ä¸šå¹´èµ„</view>
        <view class="field-value">{{profile.yearsExp}}å¹´</view>
      </view>
    </view>

    <!-- ç¬¬2ç»´åº¦ï¼šå­¦ä¹ ç›®æ ‡ -->
    <view class="section">
      <view class="section-title">å­¦ä¹ ç›®æ ‡</view>
      
      <view class="field-item">
        <view class="field-label">å­¦ä¹ ç±»å‹</view>
        <view class="field-value">{{profile.learningType === 'cross_field' ? 'è·¨ç•Œå­¦ä¹ ' : 'æœ¬èŒçªç ´'}}</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="targetField" wx:if="{{profile.learningType === 'cross_field'}}">
        <view class="field-label">ç›®æ ‡é¢†åŸŸ</view>
        <view class="field-value">{{profile.targetField || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="targetProject" wx:if="{{profile.learningType === 'cross_field'}}">
        <view class="field-label">ç›®æ ‡é¡¹ç›®</view>
        <view class="field-value">{{profile.targetProject || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="currentChallenge" wx:if="{{profile.learningType === 'core_improve'}}">
        <view class="field-label">å½“å‰å›°æ‰°</view>
        <view class="field-value text-multi">{{profile.currentChallenge || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item">
        <view class="field-label">æœŸæœ›æ—¶é—´</view>
        <view class="field-value">{{profile.targetTimeline}}ä¸ªæœˆ</view>
      </view>
    </view>

    <!-- ç¬¬3ç»´åº¦ï¼šèƒ½åŠ›ç›˜ç‚¹ -->
    <view class="section">
      <view class="section-title">èƒ½åŠ›ç›˜ç‚¹</view>
      
      <view class="field-item" bindtap="startEdit" data-field="techSkills">
        <view class="field-label">æŠ€æœ¯èƒ½åŠ›</view>
        <view class="field-value tags">
          <view class="tag" wx:for="{{profile.techSkills}}" wx:key="*this">{{item}}</view>
        </view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="softSkills">
        <view class="field-label">è½¯æŠ€èƒ½</view>
        <view class="field-value tags">
          <view class="tag" wx:for="{{profile.softSkills}}" wx:key="*this">{{item}}</view>
        </view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="strengthArea">
        <view class="field-label">æ“…é•¿é¢†åŸŸ</view>
        <view class="field-value">{{profile.strengthArea || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="weakArea">
        <view class="field-label">è–„å¼±ç¯èŠ‚</view>
        <view class="field-value">{{profile.weakArea || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>
    </view>

    <!-- ç¬¬4ç»´åº¦ï¼šå­¦ä¹ ç‰¹è´¨ -->
    <view class="section">
      <view class="section-title">å­¦ä¹ ç‰¹è´¨</view>
      
      <view class="field-item">
        <view class="field-label">å­¦ä¹ é€Ÿåº¦</view>
        <view class="field-value">{{profile.learningSpeed}}/10</view>
      </view>

      <view class="field-item">
        <view class="field-label">ç†è§£æ–¹å¼</view>
        <view class="field-value">{{comprehensionMap[profile.comprehensionStyle] || 'æœªé€‰æ‹©'}}</view>
      </view>

      <view class="field-item">
        <view class="field-label">å­¦ä¹ æ–¹å¼</view>
        <view class="field-value">{{methodMap[profile.preferredMethod] || 'æœªé€‰æ‹©'}}</view>
      </view>
    </view>

    <!-- ç¬¬5ç»´åº¦ï¼šæ€§æ ¼åº•è‰² -->
    <view class="section">
      <view class="section-title">æ€§æ ¼åº•è‰²</view>
      
      <view class="field-item">
        <view class="field-label">æ²Ÿé€šé£æ ¼</view>
        <view class="field-value">{{commMap[profile.communicationStyle] || 'æœªé€‰æ‹©'}}</view>
      </view>

      <view class="field-item">
        <view class="field-label">æŠ—å‹èƒ½åŠ›</view>
        <view class="field-value">{{profile.stressResistance}}/10</view>
      </view>

      <view class="field-item">
        <view class="field-label">èƒ½é‡æ¥æº</view>
        <view class="field-value">{{energyMap[profile.energySource] || 'æœªé€‰æ‹©'}}</view>
      </view>
    </view>

    <!-- ç¬¬6ç»´åº¦ï¼šå¯¼å¸ˆæœŸæœ› -->
    <view class="section">
      <view class="section-title">å¯¼å¸ˆæœŸæœ›</view>
      
      <view class="field-item">
        <view class="field-label">å¯¼å¸ˆé£æ ¼</view>
        <view class="field-value">{{styleMap[profile.mentorStyle] || 'æœªé€‰æ‹©'}}</view>
      </view>

      <view class="field-item" bindtap="startEdit" data-field="mentorBackground">
        <view class="field-label">ä¸“ä¸šèƒŒæ™¯</view>
        <view class="field-value">{{profile.mentorBackground || 'æ— è¦æ±‚'}}</view>
        <view class="field-arrow">â€º</view>
      </view>
    </view>

    <!-- ç¬¬7ç»´åº¦ï¼šè‡ªæˆ‘ä»‹ç» -->
    <view class="section">
      <view class="section-title">è‡ªæˆ‘ä»‹ç»</view>
      
      <view class="field-item" bindtap="startEdit" data-field="selfIntroduction">
        <view class="field-label">ä¸ªäººä»‹ç»</view>
        <view class="field-value text-multi">{{profile.selfIntroduction || 'æœªå¡«å†™'}}</view>
        <view class="field-arrow">â€º</view>
      </view>
    </view>

    <view class="bottom-spacer"></view>
  </scroll-view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="footer">
    <button class="btn-secondary" bindtap="reCollect">é‡æ–°å®Œæ•´é‡‡é›†</button>
  </view>

  <!-- ç¼–è¾‘å¼¹çª— -->
  <view class="edit-modal" wx:if="{{editingField}}">
    <view class="modal-mask" bindtap="cancelEdit"></view>
    <view class="modal-content">
      <view class="modal-title">ç¼–è¾‘ {{editingField}}</view>
      <textarea 
        class="modal-input" 
        value="{{editingValue}}"
        bindinput="onInputChange"
        placeholder="è¯·è¾“å…¥å†…å®¹"
        maxlength="300"
        auto-focus
      ></textarea>
      <view class="modal-tip">å¤šä¸ªå€¼è¯·ç”¨é€—å·åˆ†éš”</view>
      <view class="modal-actions">
        <button class="modal-btn cancel" bindtap="cancelEdit">å–æ¶ˆ</button>
        <button class="modal-btn confirm" bindtap="saveEdit">ä¿å­˜</button>
      </view>
    </view>
  </view>
</view>
